<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.34">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Getting started with Galaxy – Courses, Tutorials and Slides</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-c8ad9e5dbd60b7b70b38521ab19b7da4.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-85c3401a6a05d25e251483c19810c9d1.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">The Beginner’s Guide to Galaxy</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../topics/01_basics_of_sequencing/01_basics_of_sequencing.html"> 
<span class="menu-text">Sequencing Basics</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../topics/02_read_sequence_information/02_read_sequence_information.html"> 
<span class="menu-text">Reads</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../topics/03_ncbi_sra_at_glance/03_ncbi_sra_at_glance.html"> 
<span class="menu-text">NCBI SRA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../topics/04_intro_to_galaxy/04_intro_to_galaxy.html"> 
<span class="menu-text">Galaxy Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../topics/05_galaxy_first_steps/05_galaxy_first_steps.html" aria-current="page"> 
<span class="menu-text">First steps in Galaxy</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../topics/99_flyer/99_flyer.html"> 
<span class="menu-text">Flyer</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#a-short-introduction-to-galaxy" id="toc-a-short-introduction-to-galaxy" class="nav-link active" data-scroll-target="#a-short-introduction-to-galaxy">A short introduction to Galaxy</a></li>
  <li><a href="#starting-with-training-data" id="toc-starting-with-training-data" class="nav-link" data-scroll-target="#starting-with-training-data">Starting with training data</a></li>
  <li><a href="#create-a-new-history" id="toc-create-a-new-history" class="nav-link" data-scroll-target="#create-a-new-history">Create a new history</a></li>
  <li><a href="#rename-the-new-history" id="toc-rename-the-new-history" class="nav-link" data-scroll-target="#rename-the-new-history">Rename the new history</a></li>
  <li><a href="#download-sequencing-data" id="toc-download-sequencing-data" class="nav-link" data-scroll-target="#download-sequencing-data">Download sequencing data</a></li>
  <li><a href="#upload-your-data-to-galaxy" id="toc-upload-your-data-to-galaxy" class="nav-link" data-scroll-target="#upload-your-data-to-galaxy">Upload your data to Galaxy</a></li>
  <li><a href="#status-of-files-in-your-history" id="toc-status-of-files-in-your-history" class="nav-link" data-scroll-target="#status-of-files-in-your-history">Status of files in your history</a></li>
  <li><a href="#run-your-first-galaxy-tools" id="toc-run-your-first-galaxy-tools" class="nav-link" data-scroll-target="#run-your-first-galaxy-tools">Run your first Galaxy tools</a></li>
  <li><a href="#quality-check-of-nanopore-reads" id="toc-quality-check-of-nanopore-reads" class="nav-link" data-scroll-target="#quality-check-of-nanopore-reads">Quality check of Nanopore reads</a></li>
  <li><a href="#quality-check-of-illumina-reads" id="toc-quality-check-of-illumina-reads" class="nav-link" data-scroll-target="#quality-check-of-illumina-reads">Quality check of Illumina reads</a></li>
  <li><a href="#the-correct-files-for-the-right-tools" id="toc-the-correct-files-for-the-right-tools" class="nav-link" data-scroll-target="#the-correct-files-for-the-right-tools">The correct files for the right tools</a></li>
  <li><a href="#reviewing-the-output-and-evaluating-the-quality" id="toc-reviewing-the-output-and-evaluating-the-quality" class="nav-link" data-scroll-target="#reviewing-the-output-and-evaluating-the-quality">Reviewing the output and evaluating the quality</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Getting started with Galaxy</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="a-short-introduction-to-galaxy" class="level2">
<h2 class="anchored" data-anchor-id="a-short-introduction-to-galaxy">A short introduction to Galaxy</h2>
<p>To get started with the Galaxy platform, complete the following tutorial. It takes about 40 minutes and will familiarize you with the interface and the most important Galaxy terms. You will also upload your first data.</p>
<div class="hands-on">
<p><hands-on-title>First steps with Galaxy</hands-on-title></p>
<p>Go through and finish the tutiral “A short introduction to Galaxy”!<br>
The tutorial is available in several languages:</p>
<p><a href="https://training.galaxyproject.org/training-material/topics/introduction/tutorials/galaxy-intro-short/tutorial.html"><img src="assets/gb.svg" class="flag img-fluid" width="25" alt="English"> Galaxy Introduction Tutorial (GTN)</a></p>
<p><a href="https://training-galaxyproject-org.translate.goog/training-material/topics/introduction/tutorials/galaxy-intro-short/tutorial.html?_x_tr_sl=en&amp;_x_tr_tl=ja&amp;_x_tr_hl=en&amp;_x_tr_pto=wapp"><img src="assets/jp.svg" class="flag img-fluid" width="25" alt="日本語"> Galaxy Introduction Tutorial (GTN, automatic translation)</a></p>
<div class="reference">
<p><reference-title>Reference</reference-title> This tutorial is from the Galaxy Training Network (GTN): <a href="https://training.galaxyproject.org/training-material/topics/introduction/tutorials/galaxy-intro-short/tutorial.html"><em>Introduction to Galaxy</em></a> Lizenz: <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.</p>
</div>
</div>
</section>
<section id="starting-with-training-data" class="level2">
<h2 class="anchored" data-anchor-id="starting-with-training-data">Starting with training data</h2>
<p>Once the tutorial is complete, we can begin with our own data. I hope you enjoy it.<br>
</p>
<p><img src="assets/get_started_atgc.png" class="img-fluid" style="width:20.0%"> Let’s get started!</p>
</section>
<section id="create-a-new-history" class="level2">
<h2 class="anchored" data-anchor-id="create-a-new-history">Create a new history</h2>
<p>Now that the tutorial is complete, we can plan the work with our own data. To do this, we create a new, empty history. Then we rename the history to <strong>Data NCBI</strong></p>
<p><img src="png/history_new.PNG" class="img-fluid" style="width:80.0%"></p>
</section>
<section id="rename-the-new-history" class="level2">
<h2 class="anchored" data-anchor-id="rename-the-new-history">Rename the new history</h2>
<p>After creating the new history, we rename it. With the new name, it can be clearly identified and cannot be confused with previous analyses.</p>
<p><img src="png/history_name.PNG" class="img-fluid" style="width:80.0%"></p>
</section>
<section id="download-sequencing-data" class="level2">
<h2 class="anchored" data-anchor-id="download-sequencing-data">Download sequencing data</h2>
<p>The sequence data that provided here is taken from one of my publications and is intended to serve as an example. The sequence data has been published on NCBI SRA and is freely available. The sequenced sample is a large dsDNA virus and the data is small in size. The small size makes it perfect, easy and quick to handle.</p>
<div class="reference">
<p><reference-title>Reference</reference-title></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">Isolate</th>
<th style="text-align: center;">BioSample</th>
<th style="text-align: center;">NCBI SRA (Illumina)</th>
<th style="text-align: center;">NCBI SRA (Nanopore)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">BmNPV-My</td>
<td style="text-align: center;">SAMN18849911</td>
<td style="text-align: center;">SRR14313723</td>
<td style="text-align: center;">SRR26992684</td>
</tr>
</tbody>
</table>
<p>Wennmann, J.T., Lim, F.S., Senger, S., Gani, M., Jehle, J.A., Keilwagen, J (2024). Haplotype determination of the Bombyx mori nucleopolyhedrovirus by Nanopore sequencing and linkage of single nucleotide variants. Journal of General Virology. 105 (5), 001983. [<a href="https://doi.org/10.1099/jgv.0.001983" class="uri">https://doi.org/10.1099/jgv.0.001983</a>]</p>
</div>
<p>Please download the sequence data directly and save it temporarily on your computer. We will then upload it directly to your newly created Galaxy history “Data NCBI.”</p>
<div class="hands-on">
<p><hands-on-title>Downloading sequencing data</hands-on-title></p>
<ol type="1">
<li><p>Follow this link to download the Illumina data and save it on your computer. You should download the forward and reverse reads in two separate files:<br>
<a href="https://zenodo.org/records/17054180/files/SRR14313723_forward_illumina.fastqsanger.gz">💾 [Illumina forward reads]</a><br>
<a href="https://zenodo.org/records/17054180/files/SRR14313723_reverse_illumina.fastqsanger.gz">💾 [Illumina reverse reads]</a></p></li>
<li><p>Follow the link to download the Nanopore reads:<br>
<a href="https://zenodo.org/records/17054180/files/SRR26992684_nanopore.fastqsanger.gz">💾 [Nanopore reads]</a></p></li>
</ol>
</div>
<p>You should now have three files saved on your computer.</p>
</section>
<section id="upload-your-data-to-galaxy" class="level2">
<h2 class="anchored" data-anchor-id="upload-your-data-to-galaxy">Upload your data to Galaxy</h2>
<p>Sequence data is usually obtained directly in fastq or fastqsanger format. It is then uploaded to the Galaxy platform. We will do this in the next step.</p>
<div class="hands-on">
<p><hands-on-title>Upload your data to Galaxy</hands-on-title></p>
<ol type="1">
<li>You have the three files.<br>
</li>
<li>Go to the folder where you saved the files.<br>
</li>
<li>Go to usegalaxy.eu and click on “Upload.”<br>
</li>
<li>Drag your files into the upload window (drag and drop).<br>
</li>
<li>Click on “Start.” The upload will begin.<br>
</li>
<li>Once all files have been uploaded, click on “Close.”</li>
</ol>
<p><img src="png/upload_data.gif" class="img-fluid" style="width:100.0%"></p>
<p>Now you have to wait until all files are completely uploaded. This may take a moment. The upload is complete when the files appear green in the history.</p>
<p><img src="png/file_status.PNG" class="img-fluid" style="width:80.0%"></p>
</div>
</section>
<section id="status-of-files-in-your-history" class="level2">
<h2 class="anchored" data-anchor-id="status-of-files-in-your-history">Status of files in your history</h2>
<p>Files can have four statuses in your history. Only green files and files being processed can be worked on further.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Color</th>
<th>Status</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>🟩 Green</td>
<td>Ready</td>
<td>File is ready to use</td>
</tr>
<tr class="even">
<td>🟧 Orange</td>
<td>Running/Processing</td>
<td>File is being processed (job still running)</td>
</tr>
<tr class="odd">
<td>⬜ Gray</td>
<td>Queued</td>
<td>File is waiting to run</td>
</tr>
<tr class="even">
<td>🟥 Red</td>
<td>Error</td>
<td>File has failed (an error occurred)</td>
</tr>
</tbody>
</table>
</section>
<section id="run-your-first-galaxy-tools" class="level2">
<h2 class="anchored" data-anchor-id="run-your-first-galaxy-tools">Run your first Galaxy tools</h2>
<p>Once the data has been uploaded, we want to do something with it. We want to analyse it, not just look at it. But before we analyse it, it’s important that we get to know the data well. It’s important to know whether the sequencing worked well. We also want to know how good the quality of the sequencing is.</p>
<p>There are two tools we can use for Illumina and Nanopore data.</p>
<div class="hands-on">
<p><hands-on-title>Practice tool selection</hands-on-title></p>
<p>Please practice to select some tools. Go to web interface of usegalaxy.eu and click on tools. In the tools menu you can search for tools you would like to apply to your data. Please search for two tools and select them:</p>
<ul>
<li>falco</li>
<li>nanoplot</li>
</ul>
<p><img src="png/tool_selection.gif" class="img-fluid" style="width:100.0%"></p>
</div>
</section>
<section id="quality-check-of-nanopore-reads" class="level2">
<h2 class="anchored" data-anchor-id="quality-check-of-nanopore-reads">Quality check of Nanopore reads</h2>
<p>At first we start the tool <code class="tool">nanoplot</code> on the Nanopore data. The file’s name should be <code>SRR26992684_nanopore.fastqsanger.gz</code> and it is the input for the tool <code class="tool">nanoplot</code>.</p>
<div class="hands-on">
<p><hands-on-title>Start tool nanoplot on Nanopore data</hands-on-title></p>
<p><img src="png/tool_nanoplot.png" class="img-fluid" style="width:100.0%"></p>
</div>
</section>
<section id="quality-check-of-illumina-reads" class="level2">
<h2 class="anchored" data-anchor-id="quality-check-of-illumina-reads">Quality check of Illumina reads</h2>
<p>Next, we use the <code class="tool">falco</code> tool, which we run on the forward file of the Illumina data. Here we chose the file <code>SRR14313726_forward_illumina.fastqsanger.gz</code>.</p>
<div class="hands-on">
<p><hands-on-title>Start tool falco on Illumina data</hands-on-title></p>
<p><img src="png/tool_falco.png" class="img-fluid" style="width:100.0%"></p>
</div>
</section>
<section id="the-correct-files-for-the-right-tools" class="level2">
<h2 class="anchored" data-anchor-id="the-correct-files-for-the-right-tools">The correct files for the right tools</h2>
<p>Not all files can be read, processed or analysed by all tools. You learn this over time and with increasing experience.</p>
<div class="warning">
<p><warning-title>Chose the correct file!</warning-title></p>
<p>A common mistake is selecting the wrong files for the wrong tool. Falco is for short reads (Illumina data) and Nanoplot is for long reads. Therefore, the following combination must be selected:</p>
<ul>
<li><code class="tool">falco</code> = <code>SRR14313726_forward_illumina.fastqsanger.gz</code><br>
</li>
<li><code class="tool">falco</code> = <code>SRR14313726_reverse_illumina.fastqsanger.gz</code></li>
<li><code class="tool">nanoplot</code> = <code>SRR26992684_nanopore.fastqsanger.gz</code></li>
</ul>
</div>
</section>
<section id="reviewing-the-output-and-evaluating-the-quality" class="level2">
<h2 class="anchored" data-anchor-id="reviewing-the-output-and-evaluating-the-quality">Reviewing the output and evaluating the quality</h2>
<p>To view the results of the tools, click on the eye icon next to the outputs. Make sure you select the correct output files. They are called <code>html report</code> for the <code class="tool">nanoplot</code> tool and <code>webpage</code> for the <code class="tool">falco</code> tool.</p>
<div class="hands-on">
<p><hands-on-title>Let’s discuss the results together!</hands-on-title></p>
<p>Click on the eye of one of the files. The results should open in the center panel.</p>
<p><img src="png/tool_eye_falco_nanoplot.png" class="img-fluid" style="width:100.0%"></p>
</div>
<p><img src="assets/get_end_atgc.png" class="img-fluid" style="width:20.0%"> The results are discussed together in the group.</p>
<div class="comment">
<p><comment-title>Self-study to interpret the results</comment-title></p>
<p>If you would like to learn how to evaluate and analyse the output of <code class="tool">falco</code> (or <code class="tool">fastqc</code>, which is the predecessor of <code class="tool">falco</code>) and <code class="tool">nanoplot</code> yourself, you can do so in the following tutorial:<br>
<a href="https://training.galaxyproject.org/topics/sequence-analysis/tutorials/quality-control/tutorial.html">Galaxy Training Tutorial - Quality Control</a>.</p>
<p>Enjoy reading!</p>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/wennmannlab\.github\.io\/courses\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 <p>All content licensed under a <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">Creative Commons Attribution-NonCommercial 4.0 International License</a>.</p>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>